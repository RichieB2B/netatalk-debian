diff --git a/macros/Makefile.am b/macros/Makefile.am
index a64c315..38f7287 100644
--- a/macros/Makefile.am
+++ b/macros/Makefile.am
@@ -2,11 +2,13 @@ EXTRA_DIST = \
 	afs-check.m4		\
 	cnid-backend.m4		\
 	config-checks.m4	\
+	cups.m4			\
 	db3-check.m4		\
 	grep-check.m4		\
 	gssapi-check.m4		\
 	iconv.m4		\
 	largefile-check.m4	\
+	libgcrypt.m4		\
 	pam-check.m4		\
 	perl-check.m4		\
 	ps-check.m4		\
diff --git a/sys/netatalk/Makefile.am b/sys/netatalk/Makefile.am
index bbcf946..14eeab7 100644
--- a/sys/netatalk/Makefile.am
+++ b/sys/netatalk/Makefile.am
@@ -3,3 +3,5 @@
 pkginclude_HEADERS = aarp.h at.h at_var.h ddp.h ddp_var.h endian.h phase2.h
 
 SOURCES = aarp.c at_control.c at_proto.c ddp_input.c ddp_output.c ddp_usrreq.c
+
+EXTRA_DIST = $(SOURCES)
diff --git a/sys/solaris/Makefile.in b/sys/solaris/Makefile.in
index 41f5112..4127a98 100644
--- a/sys/solaris/Makefile.in
+++ b/sys/solaris/Makefile.in
@@ -1,8 +1,13 @@
 # Solaris specific defines, passed to subdirectories.
 # To use Sun CC, uncomment the CC and KFLAGS variables.
 #
-# $Id: Makefile.in,v 1.1.2.4 2004/10/06 01:05:32 didg Exp $
-
+# $Id: Makefile.in,v 1.1.2.4.2.1 2008/12/20 03:10:54 didg Exp $
+# This Makefile.in is not automake generated
+# copy and paste from automake Makefile.in
+srcdir = @srcdir@
+top_srcdir = @top_srcdir@
+VPATH = @srcdir@
+# end copy and paste
 
 CC	= @CC@
 # LD hardcoded to sun ld, GNU ld has been reported to cause some trouble with 64 bit
@@ -34,7 +39,8 @@ OPTOPTS=
 SRC= linkage.c tpi.c dlpi.c ioc.c if.c aarp.c ddp.c sock.c rt.c
 OBJ= linkage.o tpi.o dlpi.o ioc.o if.o aarp.o ddp.o sock.o rt.o
 HEADERS= if.h ioc.h rt.h sock.h
-EXTRA_DIST= ddp.conf Makefile
+EXTRA_DIST= ddp.conf Makefile.in $(SRC) $(HEADERS)
+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 
 INCPATH=	-I../../include -I../netatalk -I../..
 CFLAGS=	${DEFS} ${OPTOPTS} ${INCPATH} ${KCFLAGS}
@@ -103,7 +109,35 @@ CFLAGS=	${DEFS} ${OPTOPTS} ${INCPATH} ${KCFLAGS}
 @SOLARIS_MODULE_TRUE@	@echo
 @SOLARIS_MODULE_TRUE@	@echo "To uninstall the Solaris kernel module type 'make kuninstall' as root user"
 
-distdir :
+# copy and paste from automake Makefile.in
+distdir : $(DISTFILES)
+	@srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`; \
+	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's|.|.|g'`; \
+	list='$(DISTFILES)'; for file in $$list; do \
+	  case $$file in \
+	    $(srcdir)/*) file=`echo "$$file" | sed "s|^$$srcdirstrip/||"`;; \
+	    $(top_srcdir)/*) file=`echo "$$file" | sed "s|^$$topsrcdirstrip/|$(top_builddir)/|"`;; \
+	  esac; \
+	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
+	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
+	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
+	    dir="/$$dir"; \
+	    $(mkdir_p) "$(distdir)$$dir"; \
+	  else \
+	    dir=''; \
+	  fi; \
+	  if test -d $$d/$$file; then \
+	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
+	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
+	    fi; \
+	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
+	  else \
+	    test -f $(distdir)/$$file \
+	    || cp -p $$d/$$file $(distdir)/$$file \
+	    || exit 1; \
+	  fi; \
+	done
+# end copy and paste
 
 clean : sysclean
 
